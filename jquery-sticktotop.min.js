(function(x,b){b.fn.stickToTop=function(a){a=b.extend({scrollParent:window,offset:{top:0,left:0},minParentHeight:!1,minParentWidth:!1,preserveLayout:!0,bottomBound:!1,onStick:null,onDetach:null},a,!0);var d=a.scrollParent,g=0,u=b(d===window?d.document.body:d).offset();return b(this).each(function(){var s=this,c=b(s),h=c.position(),k=c.css("position"),r=c.outerWidth(!0),l=c.outerHeight(!0),m=!1,v=!1,e,q=function(){var f=d.scrollTop||b(x).scrollTop(),n=(d==window?window.document.body:d).offsetHeight,
t=(d==window?window.document.body:d).offsetWidth,p=a.bottomBound&&n-a.bottomBound-l,m=!!p&&p<f,f=f>=h.top-a.offset.top+u.top,q=!f;a.minParentWidth&&t<a.minParentWidth&&(q=!0,f=!1);f=f&&!m;m&&1!==g?(t=c.position(),c.css({position:"absolute",top:p+"px",left:t.left+"px"}),g=1,a.onDetach&&a.onDetach.call(s)):q&&2!==g||a.minParentHeight&&n<a.minParentHeight?(p={position:k},"static"===k?(c.removeAttr("style"),e&&t<a.minParentWidth&&e.removeAttr("style")):b.extend(p,{top:h.top+"px",left:h.left+"px"}),c.css(p),
g=2,a.onDetach&&a.onDetach.call(s)):f&&3!==g&&(c.css({position:"fixed",top:u.top+(a.offset.top||0)+"px",left:u.left+h.left+(a.offset.left||0)+"px",width:r+"px","z-index":1E3}),g=3,a.onStick&&a.onStick.call(s))},w=function(b){var n=l;m||a.minParentWidth&&(d==window?window.document.body:d).offsetWidth<a.minParentWidth||(m=!0,window.setTimeout(function(){if(!v){var b=c.css("position");h.left=c.css("position",k).position().left;h.top=c.css("position",k).position().top;c.css({position:b,width:"auto"});
a.preserveLayout&&(e.css({width:"auto",height:"auto"}),r=e.outerWidth(!0),n=e.outerHeight(!0),0!==n&&(l=n),e.css({width:r+"px",height:l+"px"}));c.css({width:r,height:l});g="";q();m=!1}},50))};b(window).on("resize",w);"relative"===k&&(k="static");b(a.scrollParent).on("scroll",q);a.preserveLayout&&(e=(d==window?window.document.body:d).offsetWidth>=a.minParentWidth?b("<div></div>").css({height:l,width:r}):b("<div></div>").css({height:"auto",width:"auto"}),e=c.wrap(e).parent());this.unstickToTop=function(){v=
!0;b(a.scrollParent).off("scroll",q);b(window).off("resize",w)}})}})(window.document,window.jQuery);
